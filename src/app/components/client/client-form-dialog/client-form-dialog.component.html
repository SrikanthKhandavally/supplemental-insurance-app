<div class="client-form-dialog">
  <h2 mat-dialog-title>{{dialogTitle}}</h2>
  <mat-divider class="dialog-title-divider"></mat-divider>
  <form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
    <mat-dialog-content>
      <!-- First/Last Name -->
      <div class="form-row">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>First Name</mat-label>
          <input matInput formControlName="first_name" required>
          <mat-error *ngIf="clientForm.get('first_name')?.hasError('required')">First name is required</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="last_name" required>
          <mat-error *ngIf="clientForm.get('last_name')?.hasError('required')">Last name is required</mat-error>
        </mat-form-field>
      </div>
      <!-- Date of Birth / Gender -->
      <div class="form-row">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Date of Birth</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="date_of_birth" required>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="clientForm.get('date_of_birth')?.hasError('required')">Date of birth is required</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Gender</mat-label>
          <mat-select formControlName="gender" required>
            <mat-option *ngFor="let g of genders" [value]="g">{{g}}</mat-option>
          </mat-select>
          <mat-error *ngIf="clientForm.get('gender')?.hasError('required')">Gender is required</mat-error>
        </mat-form-field>
      </div>
      <!-- Phone / Email -->
      <div class="form-row">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Phone</mat-label>
          <input matInput formControlName="contact_phone" required>
          <mat-error *ngIf="clientForm.get('contact_phone')?.hasError('required')">Phone is required</mat-error>
          <mat-error *ngIf="clientForm.get('contact_phone')?.hasError('pattern')">Invalid phone number</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email_address" required>
          <mat-error *ngIf="clientForm.get('email_address')?.hasError('required')">Email is required</mat-error>
          <mat-error *ngIf="clientForm.get('email_address')?.hasError('email')">Invalid email</mat-error>
        </mat-form-field>
      </div>
      <!-- Address (full width) -->
      <div class="form-row single">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Address</mat-label>
          <input matInput formControlName="address" required>
          <mat-error *ngIf="clientForm.get('address')?.hasError('required')">Address is required</mat-error>
        </mat-form-field>
      </div>
      <!-- City / State -->
      <div class="form-row">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>City</mat-label>
          <input matInput formControlName="city" required>
          <mat-error *ngIf="clientForm.get('city')?.hasError('required')">City is required</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>State</mat-label>
          <input matInput formControlName="state" required>
          <mat-error *ngIf="clientForm.get('state')?.hasError('required')">State is required</mat-error>
        </mat-form-field>
      </div>
      <!-- Postal Code / Country -->
      <div class="form-row">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Postal Code</mat-label>
          <input matInput formControlName="postal_code" required>
          <mat-error *ngIf="clientForm.get('postal_code')?.hasError('required')">Postal code is required</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Country</mat-label>
          <input matInput formControlName="country" required>
          <mat-error *ngIf="clientForm.get('country')?.hasError('required')">Country is required</mat-error>
        </mat-form-field>
      </div>
      <!-- Marital Status / Occupation -->
      <div class="form-row">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Marital Status</mat-label>
          <mat-select formControlName="marital_status" required>
            <mat-option *ngFor="let m of maritalStatuses" [value]="m">{{m}}</mat-option>
          </mat-select>
          <mat-error *ngIf="clientForm.get('marital_status')?.hasError('required')">Marital status is required</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Occupation</mat-label>
          <input matInput formControlName="occupation" required>
          <mat-error *ngIf="clientForm.get('occupation')?.hasError('required')">Occupation is required</mat-error>
        </mat-form-field>
      </div>
      <!-- Status (full width) -->
      <div class="form-row single">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status" required>
            <mat-option *ngFor="let s of statuses" [value]="s">{{s}}</mat-option>
          </mat-select>
          <mat-error *ngIf="clientForm.get('status')?.hasError('required')">Status is required</mat-error>
        </mat-form-field>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-stroked-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-flat-button color="primary" type="submit" [disabled]="!clientForm.valid">{{isEditMode ? 'Update' : 'Add'}} Client</button>
    </mat-dialog-actions>
  </form>
</div> 